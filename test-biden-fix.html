<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biden Redaction Test - Fixed</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .redactor-redacted {
            background-color: #000;
            color: #000;
            padding: 0 2px;
            border-radius: 2px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .instructions {
            background-color: #f0f8ff;
            border: 1px solid #0066cc;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <h1>Biden Redaction Test - After Fix</h1>
    
    <div class="instructions">
        <h3>Instructions:</h3>
        <ol>
            <li>Load this page in Chrome with the NoDoxx extension enabled</li>
            <li>Add "Biden" to the user-defined strings in the extension popup</li>
            <li>Refresh this page</li>
            <li>All instances of "Biden", "biden", and "BIDEN" should be redacted as "REDACTED"</li>
        </ol>
    </div>
    
    <div class="test-section">
        <h3>Test Case 1: Mixed Case Variations</h3>
        <p>President Biden announced a new policy today.</p>
        <p>Many supporters of biden were pleased with the announcement.</p>
        <p>The BIDEN administration continues to focus on key issues.</p>
        <p>Both Biden and his team worked hard on this initiative.</p>
    </div>
    
    <div class="test-section">
        <h3>Test Case 2: Within Sentences</h3>
        <p>When Biden spoke, the audience listened carefully.</p>
        <p>The question about biden's policy was answered thoroughly.</p>
        <p>Critics and supporters of BIDEN had different reactions.</p>
    </div>
    
    <div class="test-section">
        <h3>Test Case 3: Edge Cases</h3>
        <p>Biden-era policies are being discussed. (Should redact Biden but keep -era)</p>
        <p>The Biden,Trump,Obama list includes all names. (Should redact Biden)</p>
        <p>Words like "BidenSomething" should not be affected (no word boundary).</p>
    </div>
    
    <div class="test-section">
        <h3>Test Case 4: Dynamic Content</h3>
        <button onclick="addDynamicContent()">Add Dynamic Content with Biden</button>
        <div id="dynamic-area"></div>
    </div>
    
    <script>
        function addDynamicContent() {
            const area = document.getElementById('dynamic-area');
            const p = document.createElement('p');
            p.innerHTML = 'Dynamically added: Biden made a statement, and biden supporters responded. The BIDEN administration is active.';
            area.appendChild(p);
        }
        
        // Add some delayed content
        setTimeout(() => {
            const area = document.getElementById('dynamic-area');
            const p = document.createElement('p');
            p.innerHTML = 'Delayed content: This mentions biden in a delayed load scenario.';
            area.appendChild(p);
        }, 2000);
    </script>
</body>
</html>